HTml:
{% extends "templates/base.html" %}

{%- block content -%}
<!DOCTYPE html>

<head>
    <link rel="stylesheet" href="Invoices.css">

</head>
<html>

<body>
    <main>
        <nav class="sidebar">
            <ul>

                <li><a href="supplierportalhome.html"><img
                            src="https://cdn3.iconfinder.com/data/icons/glypho-free/64/home-512.png"
                            alt="Home" />Home</a></li>
                <li><a href="orders1.html"><img
                            src="https://cdn4.iconfinder.com/data/icons/tabler-vol-2/24/businessplan-512.png"
                            alt="Orders" />Orders</a></li>
                <li><a href="Invoices.html" class="active"><img
                            src="https://cdn3.iconfinder.com/data/icons/fluent-solid-24px-vol-5/24/ic_fluent_notepad_24_filled-512.png"
                            alt="Invoices" />Invoices</a></li>
            </ul>
        </nav>

        {% if frappe.session.user == 'Guest' %}
        {{ frappe.throw(_("Log in to access this page."), frappe.PermissionError) }}
        {% elif frappe.session.user == 'Administrator' %}
        {{ frappe.throw(_("You are Administrator."), frappe.PermissionError) }}
        {% else %}
        {% set supplier = frappe.db.get_value('Portal User', {'user': frappe.session.user}, 'parent') %}



        {% set current_fiscal_year = frappe.db.get_value('Fiscal Year', {'year_start_date': ['<=',
            frappe.utils.nowdate()], 'year_end_date' : ['=>', frappe.utils.nowdate()]}, 'name') %}
            {% set year_start_date = frappe.db.get_value('Fiscal Year', current_fiscal_year, 'year_start_date') %}
            {% set year_end_date = frappe.db.get_value('Fiscal Year', current_fiscal_year, 'year_end_date') %}

            {% set purchase_invoices = frappe.db.get_all('Purchase Invoice',fields=[ 'CONVERT(DATE_FORMAT(posting_date,
            "%d-%m-%Y"), CHAR) as posting_date', 'name', 'grand_total', 'total'],
            order_by='name desc' ) %}


            {% if purchase_invoices %}
            <div style="padding: 0px; width:100%">
                <div class="forMobile">
                    <img style="position: absolute; width: 8%; height: 30px;" src="menu.png" alt="">
                    <div class="search-container">
                        <input type="text" id="searchInputMobile" style="margin: 10px;" placeholder="Search..." oninput="searchTableMobile()">
                    </div>
                </div>
                <br>
                <div class="card forMobile">
                    {% for invoice in purchase_invoices[:] %}
                    <div class="item">
                        <div class='row d-flex align-items-end justify-content-between'>
                            <div class="col-xs-12">
                                <h3>Invoice#{{ invoice.name }}</a></h3>
                                <p>{{ frappe.utils.get_datetime(invoice.posting_date).strftime('%d-%b-%Y') }}</p>
                            </div>
                            <div class="col-xs-5">
                            </div>
                        </div>

                        <div class="details">
                            <div class="col">
                                <p>Net Total</p>
                            </div>
                            <div class="col">
                                <p>{{ invoice.grand_total }}</p>
                            </div>
                        </div>

                        <div class="details">
                            <div class="col">
                                Total
                            </div>
                            <div class="col">
                                {{ invoice.total }}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <div class="card forDesk">
                    <div class="search-container">
                        <input type="text" id="searchInput" placeholder="Search..." oninput="searchTable()">
                    </div>

                    <table class="table" id='tt' style="width: 100%; margin-bottom: 10px;">
                        <thead class="table-header">
                            <tr>
                                <th class="center">Date</th>
                                <th class="center">Purchase Invoice</th>
                                <th class="center">Net Total (INR)</th>
                                <th class="center">Total (INR)</th>
                            </tr>
                        </thead>
                        <tbody id="invoice-list">
                            {% for invoice in purchase_invoices[:] %}
                            <tr class="invoice-entry">
                                <td class="center"><span class="date" style="padding:0px;">{{ invoice.posting_date
                                        }}</span>
                                </td>
                                <td class="center">{{ invoice.name }}</td>
                                <td class="center">₹ {{ invoice.grand_total }}</td>
                                <td class="center">₹ {{ invoice.total }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="4" class="center" id="footer-counter">10 of {{ purchase_invoices|length }}
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                    <div style="margin:   0px 30px 10px 10px; text-align: right;">
                        <button id="load-more"
                            style="background-color: white; color: black; border: none; border: 1px solid black;border-radius: 5px; padding: 5px 10px 5px 10px; font-size: 16px; cursor: pointer;">
                            Load More
                        </button>
                    </div>
                </div>
                <div id="noDataMessage" style="display:none; height: 100%;">
                    <h2>No data found</h2>
                </div>
            </div>
            <style>
                #noDataMessage {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100%;
                }

                table td,
                table th {
                    padding: 10px;
                }
            </style>
            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    const entries = Array.from(document.querySelectorAll('.invoice-entry'));
                    const loadMoreButton = document.getElementById('load-more');
                    let itemsToShow = 10;

                    function updateDisplay() {
                        entries.forEach((entry, index) => {
                            entry.style.display = index < itemsToShow ? '' : 'none';
                        });


                        document.getElementById('footer-counter').textContent = `${itemsToShow < entries.length ? itemsToShow : entries.length} of ${entries.length}`;
                    }

                    function showMoreItems() {
                        itemsToShow += 10;
                        updateDisplay();

                        if (itemsToShow >= entries.length) {
                            loadMoreButton.style.display = 'none';
                        }
                    }

                    updateDisplay();
                    loadMoreButton.addEventListener('click', showMoreItems);


                    if (entries.length <= 10) {
                        loadMoreButton.style.display = 'none';
                    }
                });
            </script>



            {% else %}
            <div style="display:flex;justify-content:center;align-items:center;height:100vh;">
                <h2>No data found</h2>
            </div>
            {% endif %}

            {% endif %}

    </main>
    <script src="Invoices.js"></script>
</body>

</html>
{%- endblock -%}






CSS:
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Set a height for the body element and use flexbox for layout */
body {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  font-family: Arial, sans-serif;
}

/* Define the header element styles */
header {
  background-color: #333;
  color: #fff;
  display: flex;
  align-items: center;
  padding: 0 1rem;
  height: 3rem;
}

/* Define the main section styles and use flexbox for layout */
main {
  flex: 1;
  display: flex;
  padding: 1rem;
  background-color: #f9fafa;
  padding: 0.5rem 4rem 0rem 4rem;
}

/* Define the sidebar styles */
.sidebar {
  width: 250px;
  background-color: #f9fafa;
  padding: 1rem;
  margin-right: 1rem;
  height: calc(100vh - 3rem);
  position: relative;
  overflow-y: auto;
}

/* Define styles for the sidebar header */
.sidebar h2 {
  font-size: 1.2rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: #333;
}

/* Define styles for the sidebar unordered list */
.sidebar ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

/* Define styles for the sidebar list items */
.sidebar li {
  margin-bottom: 0.5rem;
}

/* Define styles for the sidebar links */
.sidebar a {
  color: #333;
  text-decoration: none;
  font-size: 1rem;
  display: block;
  padding: 0.5rem;
  border-radius: 5px;
  transition: background-color 0.3s ease-in-out;
}

/* Define styles for the active and hovered sidebar links */
.sidebar a.active,
.sidebar a:hover {
  background-color: #ccc;
}

/* Define styles for the active sidebar link */
.sidebar a.active {
  background-color: #87CEFA80;
  color: black;
}

/* Define table styles */
table, tr, td, th {
  padding: 10px;
  margin: auto;
}

/* Remove bottom border from table header cells */
.table thead th {
  border-bottom: 0px;
}

/* Define styles for table row hover effect */
tr:hover {
  background-color: #f9f9f9;  
}

/* Define styles for table cell borders */
.table td {
  border-top: 0.3px solid #e2e6e9;
}

/* Define styles for cards */
.card {
  background-color: #fff;
  /* box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2); */
  padding: 16px;
  width: 100%;
  border-radius: 10px;
}

/* Define styles for page content */
.page_content {
  width: 100%;
}
/* Center align text */
.center {
  text-align: center;
}

/* Hide stand menu by default */
#stand-menu {
  display: none;
}

/* Hide sidebar on screens smaller than 600px */
@media only screen and (max-width: 600px) {
  .sidebar {
    display: none;
  }

  main {
    flex-direction: column;
  }

  #chart {
    width: 100%;
  }

  /* Show stand menu on smaller screens */
  #stand-menu {
    display: initial;
  }

  #navbarSupportedContent ul {
    list-style-type: none;
    padding: 0;
  }

  #navbarSupportedContent li {
    padding: 10px 0;
    text-align: center;
  }

  #navbarSupportedContent li a {
    display: block;
    font-size: 12px;
  }
}


/* Search input styles */
#searchInput {
  padding: 8px;
  border: none;
  border-bottom: 1px solid #ddd;
  font-size: 16px;
  margin: 0px;
}

/* Table styles */
#tt {
  border-collapse: collapse;
  width: 100%;
  margin-top: 20px;
}

/* Button styles */
button {
  padding: 8px;
  background-color: #4CAF50;
  color: white;
  border: none;
  cursor: pointer;
}

/* Hide action banner by default */
.action-banner {
  display: none;
}

/* Search container styles */
.search-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* Search select and input styles */
.search-container select,
.search-container input[type="text"] {
  width: 20%;
  height: 40%;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
}

/* Search input styles */
.search-container input[type="text"] {
  font-size: 12px;
  background-color: rgb(240, 240, 240);
  border: 0.2px rgb(90, 90, 90);
  outline: black;
  border-radius: 5px;
  /* box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1); */
  margin: 20px;
}

/* Search input placeholder styles */
.search-container input[type="text"]::placeholder {
  color: #bbb;
  font-style: italic;
}

/* Sidebar image styles */
li a img {
  width: 20px;
  height: 20px;
  margin-right: 10px;
}


/*for mobile*/
@media only screen and (max-width:767px) {
/*dividing column into equal*/
.search-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.search-container input,
.search-container select {
  flex: 1;
  margin: 0px 5px 0px 30px !important;
  height: 30px !important;
}
    .forMobile{
        padding:5px;
    }
    .sidebar {
        display: none;
    }
    .table thead th{
    padding:8px;
}
    .table {
        width:100%;
        font-size: 10px !important;
    }
    /*for hiding header in mobile view*/
     th {
    display: none; /* Hide table headers */
  }
  .forDesk{
      display:none;
  }
    .date{
        font-size: 11px !important;
    }
      main{
          flex-direction: column;
          padding:0px;
      }
    progress {
        max-width: 80%;
    }
    table tr th:nth-child(1){
       width: 25%;
     }
    table tr th:nth-child(2){
       width: 30%;
     }
    table tr th:nth-child(3){
       width: 25%;
     }
    table tr th:nth-child(4){
       width: 20%;
     }

    .table td{

    padding:1px;
    
}
    #navbarSupportedContent ul {
      list-style-type: none;
      padding: 0;
    }
    
    #navbarSupportedContent li {
      padding: 10px 0;
    text-align: center;
    }
    
    #navbarSupportedContent li a {
      display: block;
        font-size: 12px;
    }
    a#stand-menu{
      /* CSS styles here */
      display: initial;
    }
    #searchInput{
          width: 100%;
    }
    
    
.card {
            padding: 0;
            border-radius: 5px;
        }

        .item {
            border-bottom: 1px solid #ccc;
            padding: 10px;
        }

        .item h3 {
            margin: 0;
        }

        .item .details {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
        }

        .item .details .col {
            flex-basis: 50%;
             align-self: flex-start;
        }

        .item .details .col:first-child {
            text-align: left;
        }

        .item .details .col:last-child {
            text-align: right;
        }
        .col{
            padding-left: 0px;
        }
        progress {
            vertical-align: middle;
        }
   
}
/* For desktop devices */
@media only screen and (min-width: 768px) {

   .forMobile {
     display: none;
  }
}



JS:
function searchTable() {
  // Get the input value and convert to lowercase
  const input = document.getElementById("searchInput").value.toLowerCase();
  
  // Get the table and its rows
  const table = document.getElementById("tt");
  const rows = table.getElementsByTagName("tr");
  
  // Loop through each row (skipping the header row)
  let found = false;
  for (let i = 1; i < rows.length; i++) {
    const row = rows[i];
    const cells = row.getElementsByTagName("td");
    
    // Loop through each cell in this row
    let rowMatch = false;
    for (let j = 0; j < cells.length; j++) {
      const cell = cells[j];
      
      // Check if the cell contains the input value
      if (cell.innerHTML.toLowerCase().includes(input)) {
        rowMatch = true;
        found = true;
        break;
      }
    }
    
    // Show or hide the row based on whether it matched the search
    row.style.display = rowMatch ? "" : "none";
  }
  
  // Show a message if no matching rows were found
  const message = document.getElementById("noDataMessage");
  const leadmore = document.getElementById("load-more");
  const tableHeader = document.getElementsByClassName("table-header")[0];
  message.style.display = found ? "none" : "";
  leadmore.style.display = found ? "" : "none";
  tableHeader.style.display = found ? "" : "none";
}
function   searchTableMobile(){
  // Get the input value and convert to lowercase
  const input = document.getElementById("searchInput").value.toLowerCase();
  
  // Get the table and its rows
  const table = document.getElementById("tt");
  const rows = table.getElementsByTagName("tr");
  
  // Loop through each row (skipping the header row)
  let found = false;
  for (let i = 1; i < rows.length; i++) {
    const row = rows[i];
    const cells = row.getElementsByTagName("td");
    
    // Loop through each cell in this row
    let rowMatch = false;
    for (let j = 0; j < cells.length; j++) {
      const cell = cells[j];
      
      // Check if the cell contains the input value
      if (cell.innerHTML.toLowerCase().includes(input)) {
        rowMatch = true;
        found = true;
        break;
      }
    }
    
    // Show or hide the row based on whether it matched the search
    row.style.display = rowMatch ? "" : "none";
  }
  
  // Show a message if no matching rows were found
  const message = document.getElementById("noDataMessage");
  const leadmore = document.getElementById("load-more");
  const tableHeader = document.getElementsByClassName("table-header")[0];
  message.style.display = found ? "none" : "";
  leadmore.style.display = found ? "" : "none";
  tableHeader.style.display = found ? "" : "none";
}
